import { action } from "@storybook/addon-actions";
import { Meta, Preview, Props, Story } from "@storybook/addon-docs/blocks";
import { boolean, text } from "@storybook/addon-knobs";
import { themes } from "@storybook/theming";
import Faker from "faker";
import { Fragment } from "react";
import { Modal } from ".";
//
Faker.seed(1);

<Meta
	title="general/modal"
	component={Modal}
	parameters={{
		options: {
			theme: themes.dark
		}
	}}
/>

# Modal

- [Table of Contents](#modal)
  * [Description](#description)
  * [Props](#props)
  * [StandardStory](#standardstory)
    + [Source](#source)
  * [Hook: useModal](#hook-usemodal)
    + [Type](#type)
    + [Example](#example)
    + [Quick Note](#quick-note)

## Description
Modal component. Contains a title and contents. This component should not be created manually.

To create a Modal, pick a title and create contents, then use the `useModal` hook to invoke the
modal (see code example at the bottom).

## Props
<Props of={Modal} />

## StandardStory
export const paragraph = Faker.lorem.paragraph();

<Preview>
	<Story name="standard">
		<div style={{ height: 120 }}>
			<Modal
				title={text("title", "Title goes here")}
				active={boolean("active", true)}
				onClickOut={action("onClickOut")}
				onClose={action("onClose")}
			>
				<Fragment>
					<h1>{text("heading", "Example heading")}</h1>
					<p>{text("content", paragraph)}</p>
				</Fragment>
			</Modal>
		</div>
	</Story>
</Preview>

### Source
(see code in story)

## Hook: useModal
### Type
```ts
const useModal: () => {
	/**
	 * This sets the `title` and `content` of the Modal. If `null` is passed, `title` will be `""`
	 * and `content` will be `null`.
	 */
	setContent: (options: { title: string, body: ReactElement } | null) => void;
	/**
	 * This will toggle the modal's `active` prop. If `force` is true, the modal will open. If
	 * `force` is false, the modal will close.
	 */
	toggle: (force?: boolean) => void;
}
```

### Example
```tsx
import { useModal } from "@/hooks";
import React, { FC, useCallback } from "react";

export const WithModal: FC = () => {
	const { setContent, toggle } = useModal();

	const onClick = useCallback(() => {
		setContent({
			title: "Hello world!",
			body: <div>I am content!</div>
		});
		toggle(true);
	}, [setContent, toggle]);

	return <div onClick={onClick}>Click me to open!</div>
};
```

### Quick Note
Clicking outside of the modal, or clicking on the `x` on the modal's top-right corner will close
the modal.
