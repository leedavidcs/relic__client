import { Meta, Preview, Props, Story } from "@storybook/addon-docs/blocks";
import { themes } from "@storybook/theming";
import { StandardStory } from "./stories";
import { Modal } from ".";

<Meta
	title="general/modal"
	component={Modal}
	parameters={{
		options: {
			theme: themes.dark
		}
	}}
/>

# Modal

- [Modal](#modal)
  * [Description](#description)
  * [Props](#props)
  * [StandardStory](#standardstory)
    + [Source](#source)
  * [Hook: useModal](#hook-usemodal)
    + [Type](#type)
    + [Example](#example)
    + [Quick Note](#quick-note)

## Description
Modal component. Contains a title and contents. This component should not be created manually.

To create a Modal, pick a title and create contents, then use the `useModal` hook to invoke the
modal (see code example at the bottom).

## Props
<Props of={Modal} />

## StandardStory
<Preview>
	<Story name="standard">
		<StandardStory />
	</Story>
</Preview>

### Source
```tsx
import { Modal } from "@/components/modal.component";
import { action, HandlerFunction } from "@storybook/addon-actions";
import { boolean } from "@storybook/addon-knobs";
import Faker from "faker";
import React, { useCallback } from "react";

Faker.seed(1);

const title: string = Faker.lorem.word();
const heading: string = Faker.lorem.word();
const paragraph: string = Faker.lorem.paragraph();

export const StandardStory = () => {
	const active: boolean = boolean("active", true);
	const onClickOutside: HandlerFunction = useCallback(action("onClickOutside"), []);
	const onClose: HandlerFunction = useCallback(action("onClose"), []);

	return (
		<Modal title={title} active={active} onClickOutside={onClickOutside} onClose={onClose}>
			<h1>{heading}</h1>
			<p>{paragraph}</p>
		</Modal>
	);
};
```

## Hook: useModal
### Type
```ts
const useModal: () => {
	/**
	 * This sets the `title` and `content` of the Modal. If `null` is passed, `title` will be `""`
	 * and `content` will be `null`.
	 */
	setContent: (options: { title: string, body: ReactElement } | null) => void;
	/**
	 * This will toggle the modal's `active` prop. If `force` is true, the modal will open. If
	 * `force` is false, the modal will close.
	 */
	toggle: (force?: boolean) => void;
}
```

### Example
```tsx
import { useModal } from "@/hooks";
import React, { FC, useCallback } from "react";

export const WithModal: FC = () => {
	const { setContent, toggle } = useModal();

	const onClick = useCallback(() => {
		setContent({
			title: "Hello world!",
			body: <div>I am content!</div>
		});
		toggle(true);
	}, [setContent, toggle]);

	return <div onClick={onClick}>Click me to open!</div>
};

```

### Quick Note
Clicking outside of the modal, or clicking on the `x` on the modal's top-right corner will close
the modal.
